/* 
 *
 * PMlib - Performance Monitor library
 *
 * Copyright (c) 2010-2011 VCAD System Research Program, RIKEN.
 * All rights reserved.
 *
 * Copyright (c) 2012-2013 Advanced Institute for Computational Science, RIKEN.
 * All rights reserved.
 *
 */


Prerequisite
============
- MPI library


How to compile
==============

1) with configure


$ ./configure [options]
$ make
# make install


Configure options:
 
 --prefix=OMSTALL_DIR
    Install directory path.  If omitted, default is /usr/local/PMlib.

 --with-mpich=MPICH_DIR
    If you will use the MPICH library, specify the directory that MPICH library is installed.
    Either --with-mpich or --with-ompi option will be required except using a wrapper compiler.
    If the wrapper compiler, e.g., mpic++ or mpicxx is used to compile, both options can be 
    eliminated.

 --with-ompi=OPENMPI_DIR
    If the OpenMPI library is used, specify the directory path.

 --host=hostname
    Specify in case of cross-compilation.


 CXX=CXX_COMPILER
    Specify a C++ compiler, e.g., g++, icpc, xlc++ or others.

 CXXFLAGS=CXX_OPTIONS
    Specify compiler options.


Here is examples.

$ ./configure --prefix=/usr/local/PMlib --with-ompi=/opt/openmpi CXX=icpc CXXFLAGS=-O3

$ ./configure CXX=mpicxx CXXFLAGS=-O3

$ ./configure --prefix=$1 \
             --host=sparc64-unknown-linux-gnu \
             CXX=mpiFCCpx \
             CXXFLAGS="-Kfast,ocl,preex,simd=2,uxsimd,array_private,parallel,openmp,optmsg=2"


If you try to install process again, execute 'make distclean' then configure.



2) Hand compile

Edit environmental variables in a Makefile_hand file for a target machine. Then, 'make'.   
A compiled module libPM.a will be placed in $(PM_DIR)/lib/ directory.

